{"version":3,"sources":["components/Modal/Modal.module.css","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.module.css","components/Modal/Modal.js","components/Searchbar/Searchbar.js","components/ImageGallery/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/ErrorMessage/ErrorMessage.js","components/Loader/Loader.js","services/api-service.js","App.js","index.js"],"names":["module","exports","modalRoot","document","querySelector","Modal","src","alt","openModal","useEffect","handleKeyDown","e","code","window","addEventListener","removeEventListener","createPortal","className","s","Overlay","onClick","target","currentTarget","SearchBar","onSubmit","useState","query","setQuery","Searchbar","SearchForm","preventDefault","trim","toast","error","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","value","onChange","toLowerCase","placeholder","ImageGalleryItem","id","ImageGalleryItemImage","ImageGallery","images","map","idx","webformatURL","tags","Button","ShowErrorMessage","message","LoaderApp","LoaderContainer","color","height","width","timeout","Component","axios","defaults","baseURL","params","key","image_type","orientation","per_page","fetchImage","a","searchQuery","page","get","q","then","response","data","hits","Status","App","setImages","setSearchQuery","setPage","status","setStatus","largeImg","setLargeImg","showModal","setShowModal","fetchImages","toggleModal","handleSearchbarSubmit","prevState","catch","console","log","finally","scrollTo","top","documentElement","scrollHeight","behavior","autoClose","Loader","event","nodeName","targetImg","find","Number","largeImageURL","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9e2b64c5.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2eMBy\",\"Modal\":\"Modal_Modal__19oDi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1gr7F\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1bzdo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__29t0G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2y1_T\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LoaderContainer\":\"Loader_LoaderContainer__2dkFa\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3y5pi\",\"SearchForm\":\"Searchbar_SearchForm__3hYLe\",\"SearchFormButton\":\"Searchbar_SearchFormButton__271tc\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__jXjvI\",\"SearchFormInput\":\"Searchbar_SearchFormInput__CRzS5\"};","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ src, alt, openModal }) {\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.code === 'Escape') {\n        openModal();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [openModal]);\n\n  const handleBackdropClick = e => {\n    if (e.target === e.currentTarget) {\n      openModal();\n    }\n  };\n\n  return createPortal(\n    <div className={s.Overlay} onClick={handleBackdropClick}>\n      <div className={s.Modal}>\n        <img src={src} alt={alt} />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\n","import { useState } from 'react';\nimport { toast } from 'react-toastify';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport s from './Searchbar.module.css';\n\nexport default function SearchBar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n\n  const handleChange = e => {\n    setQuery(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (query.trim() === '') {\n      toast.error('Please, type the query');\n      return;\n    }\n\n    onSubmit(query);\n    setQuery('');\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.SearchFormButton}>\n          <span className={s.SearchFormButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={s.SearchFormInput}\n          type=\"text\"\n          value={query}\n          onChange={handleChange}\n          // autocomplete=\"off\"\n          // autofocus\n          placeholder=\"Search images and photos\"\n        />\n      </form>\n    </header>\n  );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ src, alt, id }) => {\n  return (\n    <li className={s.ImageGalleryItem}>\n      <img src={src} alt={alt} className={s.ImageGalleryItemImage} id={id} />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.number.isRequired,\n      webformatURL: PropTypes.string.isRequired,\n      tags: PropTypes.string.isRequired,\n    }),\n  ),\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from './ImageGalleryItem';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClick }) => {\n  return (\n    <ul className={s.ImageGallery} onClick={onClick}>\n      {images.map(({ id, webformatURL, tags }, idx) => (\n        <ImageGalleryItem src={webformatURL} alt={tags} key={idx} id={id} />\n      ))}\n    </ul>\n  );\n};\n\nexport default ImageGallery;\n","import PropTypes from 'prop-types';\nimport s from './Button.module.css';\n\nconst Button = ({ onClick }) => {\n  return (\n    <button type=\"button\" className={s.Button} onClick={onClick}>\n      Load more\n    </button>\n  );\n};\n\nexport default Button;\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n","export default function ShowErrorMessage({ message }) {\n  return <h1>{message}</h1>;\n}\n","import Loader from 'react-loader-spinner';\nimport { Component } from 'react';\nimport s from './Loader.module.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass LoaderApp extends Component {\n  render() {\n    return (\n      <div className={s.LoaderContainer}>\n        <Loader\n          type=\"Puff\"\n          color=\"#00BFFF\"\n          height={100}\n          width={100}\n          timeout={3000}\n        />\n      </div>\n    );\n  }\n}\n\nexport default LoaderApp;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '19817387-6793f3100509fa593759a5ec0';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  per_page: 12,\n};\n\nconst fetchImage = async ({ searchQuery, page }) => {\n  return await axios\n    .get('', {\n      params: {\n        q: searchQuery,\n        page: page,\n      },\n    })\n    .then(response => response.data.hits);\n};\n\nexport default fetchImage;\n// const fetchImage = ({ searchQuery, page }) => {\n//   return axios\n//     .get(\n//       `${BASEURL}?q=${searchQuery}&page=${page}&key=${APIKEY}&image_type=photo&orientation=horizontal&per_page=12`,\n//     )\n//     .then(response => response.data.hits);\n// };\n","import Modal from './components/Modal';\nimport SearchBar from './components/Searchbar/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport ShowErrorMessage from './components/ErrorMessage';\nimport Loader from './components/Loader';\nimport fetchImage from './services/api-service';\n\nimport { useState, useEffect } from 'react';\nimport { ToastContainer, toast } from 'react-toastify';\n\nimport './App.css';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default function App() {\n  const [images, setImages] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [page, setPage] = useState(1);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [largeImg, setLargeImg] = useState('');\n  const [showModal, setShowModal] = useState(false);\n\n  useEffect(() => {\n    if (!searchQuery) {\n      return;\n    }\n\n    setStatus(Status.PENDING);\n\n    fetchImages();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchQuery]);\n\n  const windowScroll = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n  const openModal = event => {\n    if (event.target.nodeName === 'IMG') {\n      toggleModal();\n    }\n\n    const targetImg = images.find(({ id }) => id === Number(event.target.id));\n    setLargeImg(targetImg.largeImageURL);\n  };\n\n  //делает запись в стейт\n  const handleSearchbarSubmit = query => {\n    setSearchQuery(query);\n    setPage(1);\n    setImages([]);\n  };\n\n  const fetchImages = () => {\n    fetchImage({ searchQuery, page })\n      .then(images => {\n        setImages(prevState => [...prevState, ...images]);\n        setPage(prevState => prevState + 1);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        console.log(error);\n        setStatus(Status.REJECTED);\n        toast.error('Sorry, try again');\n      })\n      .finally(() => {\n        windowScroll();\n      });\n  };\n\n  if (status === Status.IDLE) {\n    return (\n      <>\n        <SearchBar onSubmit={handleSearchbarSubmit}></SearchBar>;\n        <ToastContainer autoClose={3000} />\n      </>\n    );\n  }\n\n  if (status === Status.PENDING) {\n    return (\n      <>\n        <SearchBar onSubmit={handleSearchbarSubmit}></SearchBar>;\n        <Loader />\n      </>\n    );\n  }\n\n  if (status === Status.REJECTED) {\n    return <ShowErrorMessage message=\"Please, try again\" />;\n  }\n\n  if (status === Status.RESOLVED) {\n    return (\n      <>\n        <div className=\"App\">\n          <SearchBar onSubmit={handleSearchbarSubmit}></SearchBar>\n          <ImageGallery images={images} onClick={openModal} />\n          {images.length > 0 && <Button onClick={fetchImages}></Button>}\n          {showModal && (\n            <Modal src={largeImg} alt={''} openModal={toggleModal} />\n          )}\n          <ToastContainer autoClose={3000} />\n        </div>\n      </>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}